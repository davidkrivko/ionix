<script>
import { slide, fade } from 'svelte/transition';
import { 
  selected_dashboard_component,
  // reload_trigger, 
  mobile_menu,
  logo,
  first_name,
} from '../../stores/store';


function menuFollowUp(name) {
  $selected_dashboard_component = name;
  $mobile_menu = false;
}

</script>

<div in:fade id="close-btn" class="absolute right-4 top-4 z-50 cursor-pointer" on:click={()=> $mobile_menu = false}>
  <svg class="w-8 fill-current text-gray-500" fill="#000" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve"><path d="M81.4,13.6L52.1,42.9c-1.2,1.2-3.1,1.2-4.2,0L18.6,13.6c-1.2-1.2-3.1-1.2-4.2,0l0,0c-1.2,1.2-1.2,3.1,0,4.2l29.3,29.3  c1.2,1.2,1.2,3.1,0,4.2L14.3,80.7c-1.2,1.2-1.2,3.1,0,4.2h0c1.2,1.2,3.1,1.2,4.2,0l29.3-29.3c1.2-1.2,3.1-1.2,4.2,0L81.4,85  c1.2,1.2,3.1,1.2,4.2,0l0,0c1.2-1.2,1.2-3.1,0-4.2L56.4,51.4c-1.2-1.2-1.2-3.1,0-4.2l29.3-29.3c1.2-1.2,1.2-3.1,0-4.2v0  C84.5,12.5,82.6,12.5,81.4,13.6z"></path></svg>
</div>

<div transition:slide id="mobile-menu" class="md:hidden flex flex-col w-full h-screen absolute bg-white pt-12 pb-4 px-6 shadow-md">

  <div class="flex flex-row justify-center mt-4">
    <button on:click={() => $selected_dashboard_component = 'profile'}
      type="button"
      class="transition-opacity duration-200 rounded-full dark:opacity-75 dark:hover:opacity-100 focus:outline-none focus:ring dark:focus:opacity-100"
    >
      <span class="sr-only">User menu</span>
      <img class="w-10 h-10 rounded-full" src="{$logo || '/static/dashboard/img/user.svg'}" alt="User" />
    </button>
  </div>
  <div class="font-semibold text-center mt-2">{$first_name}</div>

  <div class="grid grid-cols-1 gap-y-8 mt-16 pl-2">
    <div on:click={() => menuFollowUp('controllers')}
    class="cursor-pointer menu-item flex flex-row items-center gap-x-2">
    <svg class="fill-current w-6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><g><path d="M411,451.009h-4.989c-0.004,0-0.009,0.001-0.014,0.001c-0.004,0-0.008-0.001-0.012-0.001H361c-5.514,0-10,4.486-10,10    s4.486,10,10,10h50c5.514,0,10-4.486,10-10S416.514,451.009,411,451.009z"></path><path d="M361,441.009h38.371l-17.143-60H129.771l-17.143,60H151H361z M336,396.009h20v30h-20V396.009z M306,396.009h20v30h-20    V396.009z M246,406.009h20v20h-20V406.009z M216,406.009h20v20h-20V406.009z M186,406.009h20v20h-20V406.009z M156,406.009h20v20    h-20V406.009z"></path><path d="M151,451.009h-50c-5.514,0-10,4.486-10,10s4.486,10,10,10h50c5.514,0,10-4.486,10-10S156.514,451.009,151,451.009z"></path><path d="M162.359,210.27c20.58-1.328,39.098-13.103,48.967-31.403c15.704-29.119,4.79-65.586-24.329-81.29    c-8.737-4.712-18.566-7.203-28.423-7.203c-22.12,0-42.377,12.083-52.867,31.532c-6.116,11.34-8.178,23.792-6.716,35.701    c0.887-3.07,2.098-6.07,3.651-8.95c7.867-14.586,23.057-23.647,39.643-23.647c7.4,0,14.774,1.867,21.325,5.4    c10.579,5.706,18.304,15.189,21.75,26.705c3.446,11.516,2.202,23.684-3.503,34.263    C177.372,199.691,170.504,206.201,162.359,210.27z"></path><path d="M89.846,163.792c-3.013-15.36-0.933-31.812,7.06-46.633c12.237-22.69,35.867-36.785,61.668-36.785    c11.509,0,22.979,2.905,33.17,8.401c33.972,18.322,46.705,60.866,28.384,94.839c-3.283,6.087-7.393,11.549-12.137,16.293    c13.622-7.744,25.084-19.234,32.806-33.551c10.777-19.983,13.127-42.968,6.617-64.719s-21.101-39.665-41.084-50.442    c-12.377-6.675-26.302-10.204-40.268-10.204c-31.336,0-60.033,17.117-74.893,44.67c-10.777,19.983-13.127,42.968-6.618,64.719    C85.946,155.042,87.734,159.515,89.846,163.792z"></path><path d="M451.667,321.009H141V204.986c0.405,0.014,0.809,0.038,1.214,0.038c12.904,0,24.722-7.048,30.84-18.394    c4.438-8.229,5.405-17.692,2.725-26.649c-2.681-8.956-8.688-16.333-16.917-20.77c-5.097-2.749-10.83-4.202-16.578-4.202    c-12.904,0-24.722,7.048-30.841,18.394c-4.438,8.229-5.405,17.693-2.725,26.649c1.113,3.718,2.807,7.159,4.988,10.235    c3.936,4.429,8.591,8.33,13.904,11.52c1.106,0.509,2.24,0.948,3.39,1.338v117.863H60.333c-5.146,0-9.333,4.187-9.333,9.333    v101.334c0,5.146,4.187,9.333,9.333,9.333H101h1.229l18.964-66.374c0.613-2.146,2.575-3.626,4.808-3.626h260    c2.232,0,4.194,1.479,4.808,3.626l18.964,66.374H411h40.667c5.146,0,9.333-4.187,9.333-9.333V330.342    C461,325.195,456.813,321.009,451.667,321.009z M76,356.009c-5.523,0-10-4.478-10-10s4.477-10,10-10s10,4.478,10,10    S81.523,356.009,76,356.009z M106,356.009c-5.523,0-10-4.478-10-10s4.477-10,10-10s10,4.478,10,10S111.523,356.009,106,356.009z     M136,356.009c-5.523,0-10-4.478-10-10s4.477-10,10-10s10,4.478,10,10S141.523,356.009,136,356.009z M446,366.009h-30v-30h30    V366.009z"></path><path d="M346,171.009c13.785,0,25,11.215,25,25c0,2.761,2.238,5,5,5s5-2.239,5-5c0-19.299-15.701-35-35-35c-2.762,0-5,2.239-5,5    S343.238,171.009,346,171.009z"></path><path d="M346,141.009c30.327,0,55,24.673,55,55c0,2.761,2.238,5,5,5s5-2.239,5-5c0-35.841-29.159-65-65-65c-2.762,0-5,2.239-5,5    S343.238,141.009,346,141.009z"></path><path d="M346,111.009c46.869,0,85,38.131,85,85c0,2.761,2.238,5,5,5s5-2.239,5-5c0-52.383-42.617-95-95-95c-2.762,0-5,2.239-5,5    S343.238,111.009,346,111.009z"></path></g></g></svg>
      Controllers
    </div>
    <div on:click={() => menuFollowUp('thermostats')}
      class="cursor-pointer menu-item flex flex-row items-center gap-x-2">
      <svg class="fill-current w-6"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><g><path fill="none" d="M50,13.2c-20.3,0-36.8,16.5-36.8,36.8S29.7,86.8,50,86.8S86.8,70.3,86.8,50S70.3,13.2,50,13.2z M66.5,28.7   c0,0.7-0.6,1.3-1.3,1.3s-1.3-0.6-1.3-1.3s0.6-1.3,1.3-1.3S66.5,28,66.5,28.7z M60.5,26.7l1.9-3.2c0.3-0.5,0.9-0.6,1.4-0.4   c0.5,0.3,0.6,0.9,0.4,1.4l-1.9,3.2c-0.2,0.3-0.5,0.5-0.9,0.5c-0.2,0-0.3,0-0.5-0.1C60.4,27.8,60.2,27.2,60.5,26.7z M58.2,23.8   c0.7,0,1.3,0.6,1.3,1.3s-0.6,1.3-1.3,1.3s-1.3-0.6-1.3-1.3S57.4,23.8,58.2,23.8z M53.2,24.8l1-4.6c0.1-0.5,0.7-0.9,1.2-0.8   c0.5,0.1,0.9,0.6,0.8,1.2l-1,4.6c-0.1,0.5-0.5,0.8-1,0.8c-0.1,0-0.1,0-0.2,0C53.4,25.9,53.1,25.3,53.2,24.8z M49.2,17.2   c0-0.6,0.4-1,1-1c0.6,0,1,0.4,1,1V25c0,0.6-0.4,1-1,1c-0.6,0-1-0.4-1-1V17.2z M44.6,19.4c0.5-0.1,1.1,0.2,1.2,0.8l1,4.6   c0.1,0.5-0.2,1.1-0.8,1.2c-0.1,0-0.1,0-0.2,0c-0.5,0-0.9-0.3-1-0.8l-1-4.6C43.8,20,44.1,19.5,44.6,19.4z M41.6,23.7   c0.7,0,1.3,0.6,1.3,1.3s-0.6,1.3-1.3,1.3c-0.7,0-1.3-0.6-1.3-1.3S40.9,23.7,41.6,23.7z M35.8,22.7c0.5-0.3,1.1-0.1,1.4,0.4l1.9,3.2   c0.3,0.5,0.1,1.1-0.4,1.4c-0.2,0.1-0.3,0.1-0.5,0.1c-0.3,0-0.7-0.2-0.9-0.5l-1.9-3.2C35.2,23.6,35.4,23,35.8,22.7z M34.2,27.2   c0.7,0,1.3,0.6,1.3,1.3c0,0.7-0.6,1.3-1.3,1.3s-1.3-0.6-1.3-1.3C32.9,27.8,33.5,27.2,34.2,27.2z M50,71.3   c-11.7,0-21.3-9.6-21.3-21.3S38.2,28.7,50,28.7S71.3,38.2,71.3,50S61.7,71.3,50,71.3z"></path><path fill="none" d="M50,31.9C40,31.9,31.9,40,31.9,50S40,68.1,50,68.1S68.1,60,68.1,50S60,31.9,50,31.9z M62.9,51   c-0.9,0-1.6-0.7-1.6-1.6c0-5.3-6-9.5-11.1-9.5c-5.2,0-11.1,4.1-11.1,9.5c0,0.9-0.7,1.6-1.6,1.6c-0.9,0-1.6-0.7-1.6-1.6   c0-7.3,7.6-12.7,14.3-12.7c1.1,0,2.3,0.2,3.4,0.5l2.3-2.1l0.4,3c4.5,2.1,8.1,6.2,8.1,11.3C64.5,50.3,63.8,51,62.9,51z"></path><path fill="none" d="M50,5.8C25.6,5.8,5.8,25.6,5.8,50S25.6,94.2,50,94.2S94.2,74.4,94.2,50S74.4,5.8,50,5.8z M50,90   c-22.1,0-40-17.9-40-40s18-40,40-40s40,17.9,40,40S72.1,90,50,90z"></path><path d="M50,2.6C23.9,2.6,2.6,23.9,2.6,50S23.9,97.4,50,97.4S97.4,76.1,97.4,50S76.2,2.6,50,2.6z M50,94.2   C25.6,94.2,5.8,74.4,5.8,50S25.6,5.8,50,5.8S94.2,25.6,94.2,50S74.4,94.2,50,94.2z"></path><path d="M50,10c-22,0-40,17.9-40,40s17.9,40,40,40c22.1,0,40-17.9,40-40S72,10,50,10z M50,86.8c-20.3,0-36.8-16.5-36.8-36.8   S29.7,13.2,50,13.2S86.8,29.7,86.8,50S70.3,86.8,50,86.8z"></path><path d="M50,28.7c-11.8,0-21.3,9.6-21.3,21.3S38.3,71.3,50,71.3S71.3,61.8,71.3,50S61.8,28.7,50,28.7z M50,68.1   C40,68.1,31.9,60,31.9,50S40,31.9,50,31.9S68.1,40,68.1,50S60,68.1,50,68.1z"></path><path d="M56.4,38.1l-0.4-3l-2.3,2.1c-1.1-0.3-2.3-0.5-3.4-0.5c-6.7,0-14.3,5.4-14.3,12.7c0,0.9,0.7,1.6,1.6,1.6   c0.9,0,1.6-0.7,1.6-1.6c0-5.4,5.9-9.5,11.1-9.5c5.1,0,11.1,4.2,11.1,9.5c0,0.9,0.7,1.6,1.6,1.6c0.9,0,1.6-0.7,1.6-1.6   C64.5,44.3,60.9,40.2,56.4,38.1z"></path><path d="M50.2,26c0.6,0,1-0.4,1-1v-7.8c0-0.6-0.4-1-1-1c-0.6,0-1,0.4-1,1V25C49.2,25.6,49.6,26,50.2,26z"></path><path d="M53.9,26c0.1,0,0.1,0,0.2,0c0.5,0,0.9-0.3,1-0.8l1-4.6c0.1-0.5-0.2-1.1-0.8-1.2c-0.5-0.1-1.1,0.2-1.2,0.8l-1,4.6   C53.1,25.3,53.4,25.9,53.9,26z"></path><path d="M44.9,25.2c0.1,0.5,0.5,0.8,1,0.8c0.1,0,0.1,0,0.2,0c0.5-0.1,0.9-0.6,0.8-1.2l-1-4.6c-0.1-0.5-0.6-0.9-1.2-0.8   c-0.5,0.1-0.9,0.6-0.8,1.2L44.9,25.2z"></path><circle cx="58.2" cy="25.1" r="1.3"></circle><circle cx="65.2" cy="28.7" r="1.3"></circle><circle cx="41.6" cy="25" r="1.3"></circle><circle cx="34.2" cy="28.5" r="1.3"></circle><path d="M60.8,28.1c0.2,0.1,0.3,0.1,0.5,0.1c0.3,0,0.7-0.2,0.9-0.5l1.9-3.2c0.3-0.5,0.1-1.1-0.4-1.4c-0.5-0.3-1.1-0.1-1.4,0.4   l-1.9,3.2C60.2,27.2,60.4,27.8,60.8,28.1z"></path><path d="M37.4,27.3c0.2,0.3,0.5,0.5,0.9,0.5c0.2,0,0.3,0,0.5-0.1c0.5-0.3,0.6-0.9,0.4-1.4l-1.9-3.2c-0.3-0.5-0.9-0.6-1.4-0.4   c-0.5,0.3-0.6,0.9-0.4,1.4L37.4,27.3z"></path></g></svg>
      Smart thermostats
    </div>
  </div>
</div>


<style>
  #mobile-menu {
    background: url("/static/dashboard/img/waves.png") no-repeat;
    background-color: white;
    z-index: 100;
  }
  #close-btn {
    z-index: 101;
  }
</style>