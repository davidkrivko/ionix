<script>
import axios from 'axios';
import { onMount } from 'svelte';
import { slide, fade } from 'svelte/transition';
import {  
  selected_dashboard_component,
  mobile_menu,
  logo,
  first_name,
} from '../../stores/store';

// onMount(() => {
//   loadRooms();
// })



function menuFollowUp(name) {
  $selected_dashboard_component = name;
  $mobile_menu = false;
}



</script>

<div in:fade id="close-btn" class="absolute right-4 top-4 z-50 cursor-pointer" on:click={()=> $mobile_menu = false}>
  <svg class="w-8 fill-current text-gray-500" fill="#000" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve"><path d="M81.4,13.6L52.1,42.9c-1.2,1.2-3.1,1.2-4.2,0L18.6,13.6c-1.2-1.2-3.1-1.2-4.2,0l0,0c-1.2,1.2-1.2,3.1,0,4.2l29.3,29.3  c1.2,1.2,1.2,3.1,0,4.2L14.3,80.7c-1.2,1.2-1.2,3.1,0,4.2h0c1.2,1.2,3.1,1.2,4.2,0l29.3-29.3c1.2-1.2,3.1-1.2,4.2,0L81.4,85  c1.2,1.2,3.1,1.2,4.2,0l0,0c1.2-1.2,1.2-3.1,0-4.2L56.4,51.4c-1.2-1.2-1.2-3.1,0-4.2l29.3-29.3c1.2-1.2,1.2-3.1,0-4.2v0  C84.5,12.5,82.6,12.5,81.4,13.6z"></path></svg>
</div>

<div transition:slide id="mobile-menu" class="md:hidden flex flex-col w-full h-screen absolute bg-white pt-12 pb-4 px-6 shadow-md">

  <div class="flex flex-row justify-center mt-4">
    <button on:click={() => $selected_dashboard_component = 'profile'}
      type="button"
      class="transition-opacity duration-200 rounded-full dark:opacity-75 dark:hover:opacity-100 focus:outline-none focus:ring dark:focus:opacity-100"
    >
      <span class="sr-only">User menu</span>
      <img class="w-10 h-10 rounded-full" src="{$logo || '/static/dashboard/img/user.svg'}" alt="User" />
    </button>
  </div>
  <div class="font-semibold text-center mt-2">{$first_name}</div>

  <div class="mx-auto grid grid-cols-1 gap-y-8 mt-8 pt-2 text-xl">

    <div class="cursor-pointer menu-item flex flex-row items-center gap-x-2" on:click={()=> menuFollowUp('rooms')}>
      <svg class="fill-current w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11.68 10.66" x="0px" y="0px"><g data-name="Layer 2"><g data-name="Layer 1"><path d="M11.53,5.47,10.21,4.15h0l-4-4a.5.5,0,0,0-.71,0L.15,5.5a.5.5,0,0,0,0,.71.47.47,0,0,0,.35.15.47.47,0,0,0,.35-.15l.5-.5v4.45a.5.5,0,0,0,.5.5H4.32V6.91a.42.42,0,0,1,.42-.42H7a.42.42,0,0,1,.42.42v3.75H9.86a.5.5,0,0,0,.5-.5V5.71l.47.47a.5.5,0,0,0,.7,0,.51.51,0,0,0,.15-.36A.5.5,0,0,0,11.53,5.47Z"></path></g></g></svg>
      My rooms
    </div>
     <div on:click={()=> menuFollowUp('access')}
     class="cursor-pointer menu-item flex flex-row items-center gap-x-2">
      <svg class="fill-current w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" style="enable-background:new 0 0 128 128;" xml:space="preserve"><g><g><g><path d="M26.528,62.031c-7.932,0-14.385-6.394-14.385-14.252s6.453-14.253,14.385-14.253s14.384,6.394,14.384,14.253     S34.46,62.031,26.528,62.031z M26.528,37.526c-5.727,0-10.385,4.6-10.385,10.253s4.658,10.252,10.385,10.252     c5.726,0,10.384-4.599,10.384-10.252S32.254,37.526,26.528,37.526z"></path><path d="M32.315,101.492H7.228c-2.883,0-5.228-2.33-5.228-5.194v-6.542c0-13.393,11.003-24.289,24.528-24.289     c5.32,0,10.383,1.66,14.639,4.8c0.889,0.656,1.078,1.908,0.422,2.797c-0.656,0.888-1.907,1.078-2.797,0.422     c-3.563-2.629-7.804-4.019-12.264-4.019C15.209,69.467,6,78.569,6,89.756v6.542c0,0.658,0.551,1.194,1.228,1.194h25.088     c1.104,0,2,0.896,2,2S33.42,101.492,32.315,101.492z"></path></g><g><path d="M120.772,99.979H95.685c-1.104,0-2-0.896-2-2s0.896-2,2-2h25.088c0.677,0,1.228-0.536,1.228-1.194v-6.542     c0-11.188-9.209-20.289-20.528-20.289c-4.728,0-9.343,1.628-12.996,4.585c-0.858,0.694-2.117,0.563-2.813-0.296     c-0.694-0.858-0.563-2.118,0.297-2.813c4.362-3.531,9.871-5.476,15.512-5.476C114.997,63.954,126,74.85,126,88.243v6.542     C126,97.648,123.655,99.979,120.772,99.979z"></path><path d="M101.472,61.043c-7.932,0-14.384-6.394-14.384-14.252s6.452-14.253,14.384-14.253s14.385,6.394,14.385,14.253     S109.403,61.043,101.472,61.043z M101.472,36.538c-5.726,0-10.384,4.6-10.384,10.253s4.658,10.252,10.384,10.252     c5.727,0,10.385-4.599,10.385-10.252S107.198,36.538,101.472,36.538z"></path></g>
        <g><path d="M91.145,108H36.855c-3.606,0-6.54-2.912-6.54-6.492v-9.201c0-18.389,15.11-33.349,33.685-33.349     s33.685,14.96,33.685,33.349v9.201C97.685,105.088,94.751,108,91.145,108z M64,62.959c-16.368,0-29.685,13.166-29.685,29.349     v9.201c0,1.374,1.14,2.492,2.54,2.492h54.289c1.4,0,2.54-1.118,2.54-2.492v-9.201C93.685,76.125,80.368,62.959,64,62.959z">
      </path><path d="M63.305,56.621c-10.192,0-18.485-8.214-18.485-18.311S53.112,20,63.305,20S81.79,28.214,81.79,38.311     S73.497,56.621,63.305,56.621z M63.305,24c-7.987,0-14.485,6.42-14.485,14.311s6.498,14.311,14.485,14.311     s14.485-6.42,14.485-14.311S71.292,24,63.305,24z"></path></g></g></g></svg>
      User management
    </div>
    <div on:click={()=> menuFollowUp('settings')}
     class="cursor-pointer menu-item flex flex-row items-center gap-x-2">
     <svg class="fill-current w-6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="-105 347 100 100" style="enable-background:new -105 347 100 100;" xml:space="preserve"><path d="M-8.9,425l-24.2-24.1c-0.5-0.5-1.3-0.5-1.8,0c-0.5,0.5-1.3,0.5-1.8,0l-1.6-1.6c-0.5-0.5-0.5-1.3,0-1.7  c0.5-0.5,0.5-1.3,0-1.7l-2.1-2.1c-1.4-1.4-3.6-1.4-4.9,0l-3.3,3.3l-33.7-33.4c-0.4-0.3-0.6-0.8-0.8-1.1l-1.7-3.5  c-0.3-0.6-0.8-1.2-1.4-1.6l-8.1-5.9c-0.3-0.2-0.8-0.2-1,0.1l-3.8,3.8c-0.2,0.2-0.3,0.7-0.1,1l5.9,8.1c0.5,0.6,1,1.1,1.6,1.4l3.5,1.7  c0.5,0.2,0.8,0.5,1.1,0.8l33.6,33.4l-3.3,3.3c-1.4,1.4-1.4,3.6,0,4.9l2,2c0.5,0.5,1.3,0.5,1.8,0c0.5-0.5,1.3-0.5,1.8,0l1.6,1.6  c0.5,0.5,0.5,1.3,0,1.7c-0.5,0.5-0.5,1.3,0,1.7l24.4,24.2c1.8,1.7,4.9,1.7,6.7-0.1l9.6-9.5C-7,429.8-7,426.9-8.9,425z"></path><path d="M-48.6,392.3l0.9-0.9c1.2-1.2,3-1.9,4.8-1.9l0,0c1.1,0,2.1,0.2,3.1,0.8c1.3,0.6,2.6,1.2,4,1.4c6.1,0.9,12.5-0.9,17.1-5.5  c4.4-4.4,6.3-10.4,5.6-16.2c-0.2-1.6-2.2-2.3-3.3-1.1l-8.6,8.5c-3.6,3.6-9.3,3.6-12.9,0c-3.6-3.6-3.6-9.3,0-12.8l8.6-8.5  c1.1-1.1,0.5-3.1-1.1-3.3c-5.8-0.6-11.8,1.2-16.3,5.7c-5.7,5.7-7.2,14.1-4.4,21.1l-5.2,5.2L-48.6,392.3z"></path><path d="M-86.5,414.7c-4.3-0.8-8.8,0.5-12.1,3.7c-5.3,5.3-5.2,14,0.2,19.4c5.4,5.4,14.1,5.4,19.5,0.2c3.3-3.3,4.5-7.8,3.7-12.1  l15-15c-0.5-1-0.9-2.1-0.9-3.3c0-1.8,0.7-3.5,2-4.8l1-1l-7.7-7.6L-86.5,414.7z M-84,433c-2.7,2.7-7.1,2.7-9.9,0s-2.7-7.1,0-9.8  c2.7-2.7,7.1-2.7,9.9,0C-81.3,425.9-81.3,430.3-84,433z"></path></svg>
     Settings
    </div>
    <div on:click={() => menuFollowUp('stats')}
      class="cursor-pointer menu-item flex flex-row items-center gap-x-2">
      <svg class="fill-current w-6" xmlns="http://www.w3.org/2000/svg" data-name="Layer 3" viewBox="0 0 32 32" x="0px" y="0px"><path d="M30,5H2A1,1,0,0,0,1,6V25a1,1,0,0,0,1,1H30a1,1,0,0,0,1-1V6A1,1,0,0,0,30,5ZM29,24H3V7H29Z"></path><rect x="10" y="29" width="12" height="2"></rect><rect x="9.231" y="13.385" width="2.769" height="7.615"></rect><rect x="14.615" y="10" width="2.769" height="11"></rect><rect x="20" y="15.5" width="2.769" height="5.5"></rect></svg> 
      Statistics
    </div>
    <div on:click={() => menuFollowUp('support')}
      class="cursor-pointer menu-item flex flex-row items-center gap-x-2">
      <svg class="fill-current w-6" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M99.584,49.785c-0.157-6.863-5.785-12.399-12.686-12.399s-12.527,5.537-12.685,12.399c-0.004,0.072-0.007,0.143-0.007,0.214  c0,6.016-2.142,10.343-6.549,13.231c-1.716,1.125-3.794,2.026-6.18,2.692c0.48-1.323,0.744-2.75,0.744-4.239  c0-6.801-5.487-12.342-12.267-12.437c-0.044-0.002-0.088-0.002-0.133-0.003c-0.015,0-0.028-0.001-0.042-0.001l0,0H3.814  c-1.88,0-3.405,1.525-3.405,3.405v3.267c0,6.697,1.33,12.923,3.953,18.502c2.507,5.332,6.146,9.984,10.815,13.829  C24.067,95.562,36.434,99.591,50,99.591c13.247,0,25.7-5.159,35.066-14.525c9.331-9.331,14.484-21.726,14.523-34.916  c0.001-0.024,0.002-0.047,0.002-0.071c0-0.009-0.001-0.017-0.001-0.025c0-0.018,0.001-0.035,0.001-0.053  C99.591,49.928,99.587,49.857,99.584,49.785z M50,92.78c-21.254,0-42.698-11.358-42.777-36.727H49.78l0,0  c3.105,0,5.631,2.526,5.631,5.63c0,3.106-2.525,5.631-5.631,5.631H27.322c-1.88,0-3.405,1.525-3.405,3.406s1.525,3.405,3.405,3.405  h23.131c0.048,0,0.098-0.001,0.146-0.004c8.652-0.076,15.645-1.822,20.792-5.194c6.258-4.101,9.583-10.59,9.625-18.772  c0-0.025,0.001-0.052,0.001-0.077c0-3.244,2.639-5.881,5.881-5.881c3.234,0,5.867,2.625,5.88,5.854  C92.751,73.616,73.572,92.78,50,92.78z"></path><path d="M28.346,47.715c1.88,0,3.405-1.523,3.405-3.405c0-8.86,7.208-16.067,16.067-16.067c8.86,0,16.068,7.208,16.068,16.067v9.972  c0,1.881,1.524,3.406,3.405,3.406c1.88,0,3.405-1.525,3.405-3.406V44.31c0-9.069-5.303-16.921-12.972-20.621  c2.38-2.473,3.845-5.833,3.845-9.528c0-7.583-6.169-13.751-13.751-13.751S34.066,6.578,34.066,14.161  c0,3.696,1.466,7.055,3.846,9.528C30.244,27.388,24.94,35.241,24.94,44.31C24.94,46.191,26.464,47.715,28.346,47.715z M47.819,7.22  c3.828,0,6.941,3.114,6.941,6.94c0,3.828-3.113,6.941-6.941,6.941s-6.941-3.114-6.941-6.941C40.877,10.334,43.991,7.22,47.819,7.22z  "></path></svg>
      Support
    </div>
  </div>
</div>


<style>
  #mobile-menu {
    background: url("/static/dashboard/img/waves.png") no-repeat;
    background-color: white;
    z-index: 100;
  }
  #close-btn {
    z-index: 101;
  }
</style>